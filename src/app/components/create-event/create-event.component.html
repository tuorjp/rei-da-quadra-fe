<div class="create-event-page">
  <div class="create-event-form-container">

    <div class="create-event-header">
      <p class="welcome-text">Organize sua partida</p>
      <h1 class="app-name">{{ langService.translate('create.event') }}</h1>
      <p class="app-subtitle">Preencha os detalhes do novo evento.</p>
    </div>

    <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="event-form">

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ langService.translate('event.name') }}</mat-label>
        <mat-icon matPrefix>sports_soccer</mat-icon>
        <input matInput formControlName="nome" [placeholder]="langService.translate('event.name.placeholder')">
        <mat-error *ngIf="eventForm.get('nome')?.hasError('required')">
          {{ langService.translate('field.required') }}
        </mat-error>
        <mat-error *ngIf="eventForm.get('nome')?.hasError('minlength')">
          {{ langService.translate('field.minlength') }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width" (click)="openLocationPicker()" style="cursor: pointer;">
        <mat-label>{{ langService.translate('event.location') }}</mat-label>
        <mat-icon matPrefix>location_on</mat-icon>
        <input
          matInput
          formControlName="local"
          readonly
          [placeholder]="langService.translate('event.location.placeholder')"
          style="cursor: pointer;"
        >
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ langService.translate('event.datetime') }}</mat-label>
        <mat-icon matPrefix>schedule</mat-icon>
        <input matInput type="datetime-local" formControlName="dataHorario">
        <mat-error *ngIf="eventForm.get('dataHorario')?.hasError('required')">
          {{ langService.translate('field.required') }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ langService.translate('event.players.per.team') || 'Jogadores por Time' }}</mat-label>
        <mat-icon matPrefix>groups</mat-icon>
        <input matInput type="number" formControlName="jogadoresPorTime" min="1" placeholder="Ex: 5">
        <mat-error *ngIf="eventForm.get('jogadoresPorTime')?.hasError('required')">
          {{ langService.translate('field.required') }}
        </mat-error>
        <mat-error *ngIf="eventForm.get('jogadoresPorTime')?.hasError('min')">
          Mínimo de 1 jogador
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ langService.translate('event.total.matches') || 'Total de Partidas (Opcional)' }}</mat-label>
        <mat-icon matPrefix>emoji_events</mat-icon>
        <input matInput type="number" formControlName="totalPartidasDefinidas" min="1" placeholder="Ex: 10">
        <mat-hint>Deixe em branco se não quiser definir um limite</mat-hint>
      </mat-form-field>

      <div class="actions-container">

        <button
          mat-flat-button
          color="primary"
          type="submit"
          class="btn-submit"
          [disabled]="isSubmitting || eventForm.invalid"
        >
          <mat-spinner diameter="24" *ngIf="isSubmitting"></mat-spinner>
          <span *ngIf="!isSubmitting">
            <mat-icon style="vertical-align: middle; font-size: 1.2rem; height: 1.2rem; width: 1.2rem;">check</mat-icon>
            {{ langService.translate('button.create') }}
          </span>
        </button>

        <button
          type="button"
          class="btn-cancel"
          (click)="onCancel()"
          [disabled]="isSubmitting"
        >
          {{ langService.translate('button.cancel') }}
        </button>
      </div>

    </form>
  </div>
</div>
